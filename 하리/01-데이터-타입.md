# 데이터 타입 정리

- 변수
  - 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름
- 식별자
  - 어떤 값을 구별해서 식별할 수 있는 고유한 이름
  - 값이 아니라 메모리 주소를 기억
  - 선언하지 않은 식별자에 접근하면 `ReferenceError(참조 에러)`가 발생
- 자바스크립트는 변수 선언을 다음의 2단계에 걸쳐 수행
  - 선언 단계
    - 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알림
  - 초기화 단계
    - 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당해 초기화
- 변수 호이스팅
  - 변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징
- 변수 선언은 런타임 이전에 먼저 실행, 값의 할당은 런타임에 실행
- 자바스크립트의 변수는 선언이 아닌 할당에 의해 타입 추론됨
  - 재할당에 의해 변수의 타입은 언제든지 동적으로 변할 수 있음 -> **동적 타이핑**
  - 값을 재할당할 수 없어서 변수에 저장된 값을 변경할 수 없다면 그것은 변수가 아닌 상수
    - const를 사용하여 상수처럼 선언할 수 있으나, 조금 다르다고 한다. (뭐가 다른걸까. 아직 안 읽어서 모르겠다.)

<br>

## 데이터 타입이 필요한 이유

- 값을 저장할 때 확보해야 하는 **메모리 공간의 크기**를 결정하기 위해
- 값을 참조할 때 한 번에 읽어 들여야 할 **메모리 공간의 크기**를 결정하기 위해
- 메모리에서 읽어 들인 **2진수를 어떻게 해석**할지 결정하기 위해

<br>

## 데이터 타입의 종류

### 기본형(원시형, primitive type)

- 값이 담긴 주솟값을 바로 복제
- 불변성(immutability)
  - 값 변경 시, 데이터 영역에 다른 값을 생성하여 변수 영역의 주솟값만 바꾸는 식
- Number
  - Infinity: 양의 무한대
  - -Infinity: 음의 무한대
  - NaN: 산술 연산 불가(not a number)
- String
  - 이미 생성된 문자열의 일부 문자를 변경해도 반영되지 않는다.
- Boolean
- undefined
- null
- Symbol

### 참조형(reference type)

- 값이 담긴 주솟값들로 이루어진 묶음(기본형 묶음)을 가리키는 주솟값 복제
- 가변성(mutability)
  - 내부 프로퍼티 변경 시 성립
  - 객체 내부 프로퍼티 변경 시, 프로퍼티 변수 영역의 주솟값이 바뀔 뿐 객체 변수 영역의 주솟값은 바뀌지 않는다.
- Object
  - Array
  - Function
  - Date
  - RegExp
  - Map, WeakMap
  - Set, WeakSet

### 가비지 컬렉터(GC)

- 참조 카운트가 0인 메모리 주소는 가비지 컬렉터의 수거 대상이 된다.
  - 가비지 컬렉터는 런타임 환경에 따라 특정 시점이나 메모리 사용량이 포화 상태에 임박할 때마다 자동으로 수거 대상들을 수거

<br>

## 원시 값 복사 (값에 의한 전달)

- 추측 1: 변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수에는 할당되는 변수의 원시 값이 복사되어 전달된다.
  - 두 변수의 값은 다른 메모리 공간에 저장된 별개의 값
  - 주솟값이 복사되는 형식이 아닌 듯
- 추측 2: 변수를 할당하는 시점에는 같은 원시 값을 참조하다가 어느 한쪽의 변수에 재할당이 이뤄졌을 때야 새로운 메모리 공간에 재할당된 값을 저장한다.
- 뭐가 됐든 자바스크립트의 변수에는 주솟값이 저장되므로, 여기에서도 값이 아닌 메모리 주소를 전달하여 값을 참조한다.
- 각 변수의 주솟값이 달라지는 시점에 상관 없이 결국 두 변수의 원시 값은 서로 다른 메모리 공간에 저장된 별개의 값이 되어 어느 한쪽에서 재할당을 통해 값을 변경하더라도 서로 간섭할 수 없다.

<br>

## 참조 값 복사 (참조에 의한 전달)

- 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달된다.
  - 두 변수는 동일한 참조 값을 갖게 되어 동일한 객체를 가리킨다.

<br>

## 불변 객체

- 참조형에도 새로운 객체 할당 시 기본형 데이터와 마찬가지로 불변성을 띈다.
- 주로 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우에 불변 객체를 사용

### 얕은 복사

- 바로 아래 단계의 값만 복사

### 깊은 복사

- 내부의 모든 값들을 하나하나 찾아서 전부 복사

#### JSON을 활용한 깊은 복사

```js
var copyObject = function (target) {
  return JSON.parse(JSON.stringify(target));
};
```

<br>

## undefined

- 자바스크립트 엔진은 사용자가 응당 어떤 값을 지정할 것이라고 예상되는 상황임에도 실제로는 그렇게 하지 않았을 때 undefined를 반환
  - 값을 대입하지 않은 변수, 즉 데이터 영역의 메모리 주소를 지정하지 않은 식별자에 접근할 때
  - 객체 내부의 존재하지 않는 프로퍼티에 접근하려고 할 때
  - return 문이 없거나 호출되지 않는 함수의 실행 결과
- var 키워드로 선언한 변수는 암묵적으로 undefined로 초기화

### 주의해야 할 점

- 사용자가 명시적으로 부여한 경우
  - '비어있음'을 의미하긴 하지만 하나의 값으로 동작하기 때문에 순회의 대상이 될 수 있음
- 비어있는 요소에 접근했을 때 자바스크립트 엔진에 의해 반환되는 경우
  - 해당 프로퍼티 내지 배열의 키값(인덱스) 자체가 존재하지 않음을 의미
  - 값이 없음을 의미하므로 순회의 대상이 될 수 없음

<br>

## null

- '비어있음'을 명시적으로 나타내고 싶을 때 사용
- 함수가 유효한 값을 반환할 수 없는 경우 명시적으로 null을 반환하기도 함

### 주의해야 할 점

- `typeof null`이 'object'라는 점
  - 자바스크립트 자체 버그

<br>

## Symbol

- 외부에 노출되지 않으며, 다른 값과 절대 중복되지 않는 유일무이한 값
- 주로 이름이 충돌할 위험이 없는 객체의 유일한 프로퍼티 키를 만들기 위해 사용
